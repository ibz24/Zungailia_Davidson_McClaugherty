---
title: "Untitled"
author: "Megan McClaugherty"
date: "2022-11-21"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r}
#Check working directory
getwd()

#Load necessary packages
library(dplyr)
library(lubridate)
library(tidyverse)

#reading in dataframe
Coweeta <- read.csv("./Data/Raw/1040_Hourly_CR10_1_2080.csv")

```

```{r}
#Check dimensions
dim(Coweeta)

#Check column names
colnames(Coweeta)

#Select columns:
Coweeta_wrangled <- Coweeta %>% select(site, Year, YearDay, smois30, smois60)
```

```{r}
#Addressing the date
class(Coweeta_wrangled$YearDay)
class(Coweeta_wrangled$Year)


Coweeta_wrangled2 <- Coweeta_wrangled %>% 
  mutate(Date = as.Date(paste0(Year,"-",YearDay),format = "%Y-%j"))

```

```{r}
#Excluding smois30 values less than 0 and greater than 1 (soil moisture expressed as percent water content)

Coweeta_wrangled3 <- Coweeta_wrangled2 %>% 
  filter(smois30 >= 0 & smois30 <= 1)

```

```{r}
#Separating 4 sites into 4 dataframes; checking all for NAs. Only site4 has NAs but it's only in the smois60 so we could just plan to use the smois 30 data instead? 

site1 <- Coweeta_wrangled3 %>% 
  filter(site == "1")
sum(is.na(site1))

site2 <- Coweeta_wrangled3 %>% 
  filter(site == "2")
sum(is.na(site2))

site3 <- Coweeta_wrangled3 %>% 
  filter(site == "3")
sum(is.na(site3$Date)) #showing 1 NA in the date column, could just drop the date? 

site4 <- Coweeta_wrangled3 %>% 
  filter(site == "4")
sum(is.na(site4$smois30)) #only has NAs in the smois60


```

```{r}
#Plotting 

site1_plot <- ggplot(site1) +
  geom_line(aes(x = Date, y = smois30))
print(site1_plot)

site2_plot <- ggplot(site2) +
  geom_line(aes(x = Date, y = smois30))
print(site2_plot)

site3_plot <- ggplot(site3) +
  geom_line(aes(x = Date, y = smois30))
print(site3_plot)

site4_plot <- ggplot(site4) +
  geom_line(aes(x = Date, y = smois30))
print(site4_plot)

```


```{r} 
#averaging by date for each site

site1_averaged <-site1 %>% 
  group_by(Date) %>% 
  summarise(AverageDailySmois30 = mean(smois30))

site2_averaged <- site2 %>% 
  group_by(Date) %>% 
  summarise(AverageDailySmois30 = mean(smois30))

site3_averaged <- site3 %>% 
  group_by(Date) %>% 
    summarise(AverageDailySmois30 = mean(smois30))

site4_averaged <- site4 %>% 
  group_by(Date) %>% 
    summarise(AverageDailySmois30 = mean(smois30))

```

```{r pressure, echo=FALSE}
#Plotting the daily averages

site1averaged_plot <- ggplot(site1_averaged) +
  geom_line(aes(x = Date, y = AverageDailySmois30))
print(site1averaged_plot)

site2averaged_plot <- ggplot(site2_averaged) +
  geom_line(aes(x = Date, y = AverageDailySmois30))
print(site2averaged_plot)

site3averaged_plot <- ggplot(site3_averaged) +
  geom_line(aes(x = Date, y = AverageDailySmois30))
print(site3averaged_plot)

site4averaged_plot <- ggplot(site4_averaged) +
  geom_line(aes(x = Date, y = AverageDailySmois30))
print(site4averaged_plot)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

```{r}

```

